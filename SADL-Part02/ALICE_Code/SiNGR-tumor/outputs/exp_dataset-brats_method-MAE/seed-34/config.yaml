seed: 34
node_rank: 0
num_nodes: 1
n_gpus: 1
prefix: exp_
experiment_root: ${prefix}dataset:${data.dataset}_method:${method_name}
experiment_setting: dataset:${data.dataset}_method:${method_name}
parameter_setting: ${model.params.cfg.arch}_${model.params.cfg.test_on_patches}_${data.label_name}_${data.image_size}_${data.image_depth}_${model.params.cfg.loss_name}_${model.params.cfg.base_loss}_${model.params.cfg.loss_type}_${model.params.cfg.alpha}_${model.params.cfg.pos_weight}_${model.params.cfg.use_opposite_sign}_${model.params.cfg.directional_weight}_lr:${optimizer.params.lr}_wd:${optimizer.params.weight_decay}
trial_setting: seed:${seed}_fold:${data.fold_index}
snapshot_dir: /data1/courses/2024-2025/4343SADL6/Tumor_Group/SiNGR-tumor/outputs/exp_dataset:brats_method:MAE/dataset:brats_method:MAE_SwinUNETR_True_fast_sgc_margin_128_64_distance-signedfocal_l1_1_2.0_1.0_True_1.0_lr:0.0001_wd:1e-05_seed:34_fold:0
pipeline_cls: mlpipeline.train.semantic_segmentation.SemanticSegmentation
output_root: outputs
inference_root: /opt/inference_results
inference_dir: ${inference_root}/${experiment_root}/${experiment_setting}_${parameter_setting}_${trial_setting}
method_name: MAE
train:
  distributed: false
  num_epochs: 200
  continue_train: false
  inference_only: false
logging:
  formatters:
    simple:
      format: '[%(asctime)s][%(name)s][%(levelname)s] - %(message)s'
  handlers:
    console:
      class: logging.StreamHandler
      formatter: simple
      stream: ext://sys.stdout
    file:
      class: logging.FileHandler
      filename: ${snapshot_dir}/pipeline.log
      formatter: simple
  root:
    handlers:
    - console
    - file
    level: INFO
  version: 1
data:
  root_dir: /opt/data/brain_images
  data_dir: ${data.root_dir}/workdir/datasets
  image_dor: null
  mean: null
  std: null
  num_classes: 3
  setting: multiclass
  dataset: brats
  dataset_cls: mlpipeline.data.dataset.BRATSDataset
  site: C
  fold_index: 0
  pkl_filename: cv_split_5folds_brats_${seed}.pkl
  num_workers: 16
  batch_size: 2
  subsample: 1.0
  divide_batch_per_n_gpus: true
  val_amount: 0.1
  augs:
    train: null
    val: null
  pkl_filename_test: cv_split_5folds_brats_test_${seed}.pkl
  image_dir:
    brats: /opt/data/BraTS/MICCAI_BraTS2020_TrainingData
    geo: /opt/data/BraTS/BraTS_GeoLS
  image_size: 128
  image_depth: 64
  image_root: null
  num_channels: 4
  num_dims: 4
  label_name: fast_sgc_margin
  valid_batch_size: 1
  sw_batch_size: 2
  gt_mode: null
checkpointer:
  keep_old: false
  comparator: gt
optimizer:
  scheduler:
    warmup_for: 0
    type: milestones
    gamma: 0.1
    milestones:
    - 140
  cls: torch.optim.Adam
  params:
    params: null
    lr: 0.0001
    weight_decay: 1.0e-05
criterion:
  cls: torch.nn.BCEWithLogitsLoss
  params: null
defaults:
- experiment: oai_mae
eval_baseline_only: true
model:
  name: SemanticSegmentation
  cls: mlpipeline.models.semantic_segmentation.${model.name}
  pretrained_encoder: null
  pretrained_model: null
  find_unused_parameters: false
  params:
    cfg:
      arch: SwinUNETR
      encoder_name: null
      encoder_weights: imagenet
      num_classes: ${data.num_classes}
      num_channels: ${data.num_channels}
      image_size: ${data.image_size}
      image_depth: ${data.image_depth}
      loss_name: distance-signedfocal
      loss_mode: binary
      loss_type: 1
      base_loss: l1
      alpha: 2.0
      beta: 1.0
      pos_weight: 1.0
      use_opposite_sign: true
      directional_weight: 1.0
      am_constant: 0.0
      distance_weight: 1.0
      dropout: 0.1
      dataset: ${data.dataset}
      pretrained: false
      test_on_patches: true
      label_name: dist
metrics:
  mode: binary
  output_mode: tanh
  n_classes: 3
  threshold: 0.0
  key_metric: EDice
  reduction: macro-imagewise
experiment: brats_uncertainty_sem_seg
original_cwd: /data1/courses/2024-2025/4343SADL6/Tumor_Group/SiNGR-tumor
